#include <common.h>
#include <env.h>
#include <util.h>
#include <util2.h>

#include "test_config.h"

#include <stdlib.h>

namespace trn {
namespace testing {

void setenv(const char *value)
{
    static char buffer[1024];
    strcpy(buffer, value);
    putenv(buffer);
}

void set_envars()
{
    setenv("HOME=@TRN_TEST_HOME_DIR@");
    setenv("TMPDIR=@TRN_TEST_TMP_DIR@");
    setenv("USER=@TRN_TEST_LOGIN_NAME@");
    setenv("DOTDIR=@TRN_TEST_DOT_DIR@");
    setenv("TRNDIR=@TRN_TEST_TRN_DIR@");
    setenv("NNTPSERVER=");
    setenv("NAME=");
    setenv("NEWSORG=");
    setenv("ORGANIZATION=");
}

void reset_envars()
{
    setenv("HOME=");
    setenv("TMPDIR=");
    setenv("USER=");
    setenv("DOTDIR=");
    setenv("TRNDIR=");
    setenv("NNTPSERVER=");
}

bool set_name(char *)
{
    g_login_name = "@TRN_TEST_LOGIN_NAME@";
    g_real_name = "@TRN_TEST_REAL_NAME@";
    return true;
};

bool set_host_name(char *)
{
    g_local_host = savestr("@TRN_TEST_LOCAL_HOST@");
    g_p_host_name = "@TRN_TEST_P_HOST_NAME@";
    return true;
};

void reset_lib_dirs()
{
    g_lib = "@TRN_TEST_LIB_DIR@";
    g_rn_lib = "@TRN_TEST_RN_LIB_DIR@";
}

} // namespace testing
} // namespace trn
